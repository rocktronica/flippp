<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>{{title}} - flippp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @page {
            margin: 0;
            padding: 0;

            size: {{pageWidth}} {{pageHeight}};
        }

        html {
            background: #ddd;
        }

        .page {
            width: {{pageWidth}};
            height: {{pageHeight}};

            display: grid;
            grid-template-columns: repeat({{columns}}, minmax(0, 1fr));
            grid-template-rows: repeat({{rows}}, minmax(0, 1fr));

            direction: {{pageDirection}};

            /* For screen display only */
            background: #fff;
            margin: .5in auto;

            padding: {{pagePadding}};
        }

        .panel {
            /* For screen display only */
            outline: 1px dashed #ccc;

            display: flex;
            justify-content: space-between;
            flex-direction: row;

            direction: ltr;
        }

        .handle {
            flex: 1;
            font-family: monospace;
            padding: {{handlePadding}};
            font-size: 10px;
            line-height: 1.2;
            overflow: hidden;
        }

        .handle header {
            font-weight: 800;
            font-size: 12px;
        }

        .handle footer {
            font-size: 8px;
            font-style: italic;
        }

        .handle dt {
            font-weight: 800;
        }

        .handle header, .handle dd {
            margin: 0 0 10px;
        }

        .image {
            background-size:
                {{#crop}}cover{{/crop}}
                {{^crop}}contain{{/crop}};
            background-repeat: no-repeat;
            background-position: {{imagePosition}};

            width: {{imageWidth}};
            height: {{imageHeight}};
            margin: {{imageMargin}};

            filter: {{imageFilter}};
            transform: rotate({{imageRotate}});
        }

        @media print {
            html, .page {
                background: none !important;
            }

            .page {
                margin: 0;
            }

            /* TODO: parameterize */
            .panel {
                outline: none;
            }
        }
    </style>
</head>

<body>
    {{#pages}}
        <div class="page">
            {{#panels}}
                <div class="panel">
                    <div class="handle">
                        <header>{{title}}</header>

                        <dl>
                            <dt>Filename:</dt>
                            <dd>{{filename}}{{^filename}}BLANK{{/filename}}</dd>

                            <dt>Page:</dt>
                            <dd>{{page}}/{{pageCount}}</dd>

                            <dt>ID:</dt>
                            <dd>{{id}}/{{panelCount}}</dd>
                        </dl>

                        <footer>
                            made with flippp
                        </footer>
                    </div>
                    {{#filename}}
                        <div class="image" style="background-image:url({{filename}})"></div>
                    {{/filename}}
                </div>
            {{/panels}}
        </div>
    {{/pages}}
</body>

</html>
